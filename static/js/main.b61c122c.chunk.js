(this["webpackJsonpfaceit-metric"]=this["webpackJsonpfaceit-metric"]||[]).push([[0],{41:function(e,a,t){e.exports=t(77)},46:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){},49:function(e,a,t){},74:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(17),l=t.n(c);t(46),t(47),t(48);var s=function(){return n.a.createElement("footer",{className:"footer"},n.a.createElement("div",null,"by\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/iph9x",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://vk.com/iph9x")}},"Ivan")))},i=t(10);t(49);var o=function(){return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"header__container"},n.a.createElement(i.b,{to:"/faceit-metric/"},n.a.createElement("h1",null,"FACEIT METRIC")),n.a.createElement("nav",{className:"nav"},n.a.createElement(i.b,{to:"/faceit-metric/"},"Results"),n.a.createElement(i.b,{to:"/faceit-metric/compare"},"Compare"))))},m=t(3),u=t(16),p=t(11),d=t(13),E=t.n(d),v=t(19),_=t(20),f=_.create({headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("bed7e688-9b35-4378-a761-a8acd33d160f")},baseURL:"https://open.faceit.com/data/v4/"});f.interceptors.request.use((function(e){return e})),f.interceptors.response.use((function(e){return e}),(function(e){var a=e.response?e.response.status:408;return a>=500&&window.console.error(e.toString()),401===a&&window.console.log("logout"),Promise.reject(e)}));var h=_.create({headers:{"Content-Type":"application/json"},baseURL:"https://api.faceit.com/"});h.interceptors.request.use((function(e){return e})),h.interceptors.response.use((function(e){return e}),(function(e){var a=e.response?e.response.status:408;return a>=500&&window.console.error(e.toString()),401===a&&window.console.log("logout"),Promise.reject(e)}));var g=h,y=function(e){return g.get(e)},b=function(e,a){return{type:"GET_SEARCH_RESULT_SUCCESS",playerStats:e,playerInfo:a}},N=t(21),S=t(22),k=t(39),w=t.n(k);t(74);var x=function(){return n.a.createElement("div",{className:"preloader-wrapper"},n.a.createElement("div",{className:"preloader"},n.a.createElement(N.a,{icon:S.b})))};var C=function(e){var a=e.nickname,t=e.avatar,r=e.level,c=e.elo,l=e.matches,s=e.kd,i=e.hs,o=e.winRate;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"player-card player-card__avatar-box"},n.a.createElement("div",{className:"player-card__nickname"},a),n.a.createElement("img",{className:"player-card__avatar",src:t,alt:""})),n.a.createElement("div",{className:"player-card player-card__alltime-box"},n.a.createElement("div",{className:"player-card__avg-title"},"Statistic for alltime"),n.a.createElement("div",{className:"player-card__stat-box"},n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"Level:"),n.a.createElement("div",{className:"player-card__postfix"},r)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"Elo:"),n.a.createElement("div",{className:"player-card__postfix"},c)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"matches:"),n.a.createElement("div",{className:"player-card__postfix"},l)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/D Ratio:"),n.a.createElement("div",{className:"player-card__postfix"},s)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),n.a.createElement("div",{className:"player-card__postfix"},i,"%")),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"win rate:"),n.a.createElement("div",{className:"player-card__postfix"},o,"%")))))};var T=function(e){var a=e.matches,t=e.matchesArr;return n.a.createElement("div",{className:"match__wrapper"},a&&n.a.createElement("div",{className:"match__item-titles"},n.a.createElement("div",null,"map"),n.a.createElement("div",null,"team"),n.a.createElement("div",null,"score"),n.a.createElement("div",null,"k/d"),n.a.createElement("div",null,"hs, %"),n.a.createElement("div",null,"stat"),n.a.createElement("div",null,"date"),n.a.createElement("div",null,"elo")),a&&t)},j=function(e){for(var a={kd:0,kr:0,hs:0,frags:0,winrate:0},t=e.length-1,r=0;r<e.length-1;r+=1)a.kd+=Number.parseFloat(e[r].c2),a.kr+=Number.parseFloat(e[r].c3),a.frags+=Number.parseFloat(e[r].i6),a.hs+=Number.parseFloat(e[r].c4),a.winrate+=Number.parseFloat(e[r].i10);return{kd:Number.parseFloat((a.kd/t).toFixed(2)),kr:Number.parseFloat((a.kr/t).toFixed(2)),hs:Math.floor(a.hs/t),frags:Math.floor(a.frags/t),winrate:Math.floor(a.winrate/t*100)}};var O=function(e){var a=e.bgClass,t=e.map,r=e.team,c=e.score,l=e.kd,s=e.hs,i=e.frags,o=e.assists,m=e.deaths,u=e.date,p=e.elo,d=e.matchId;return n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"faceit.com",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://www.faceit.com/ru/csgo/room/".concat(d,"/scoreboard"))}},n.a.createElement("div",{className:a},n.a.createElement("div",null,t),n.a.createElement("div",null,r),n.a.createElement("div",null,c),n.a.createElement("div",null,l),n.a.createElement("div",null,s),n.a.createElement("div",null,"".concat(i,"/").concat(o,"/").concat(m)),n.a.createElement("div",null,function(e){var a=new Date(null);return a.setTime(e),"\n        ".concat(a.getDate()<10?"0".concat(a.getDate()):a.getDate(),".").concat(a.getMonth()<10?"0".concat(a.getMonth()+1):a.getMonth()+1," -\n        ").concat(a.getHours()<10?"0".concat(a.getHours()):a.getHours(),":").concat(a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes())}(u)),n.a.createElement("div",null,Number.isNaN(p)?0:p>0?"+".concat(p):p)))};var L=function(e){var a=e.matches,t=e.gamesCount,r=a.kd,c=a.kr,l=a.hs,s=a.frags,i=a.winrate;return n.a.createElement("div",{className:"player-card player-card__avg-box"},n.a.createElement("div",{className:"player-card__avg-title"},"Statistic for ",t," games"),n.a.createElement("div",{className:"player-card__stat-box"},n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/D:"),n.a.createElement("div",{className:"player-card__postfix"},r)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/R:"),n.a.createElement("div",{className:"player-card__postfix"},c)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),n.a.createElement("div",{className:"player-card__postfix"},l)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg frags:"),n.a.createElement("div",{className:"player-card__postfix"},s)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"win rate:"),n.a.createElement("div",{className:"player-card__postfix"},i,"%"))))};t(75);var R=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.playerSearch})),t=a.playerStats,c=a.isFetching,l=a.error,s=Object(p.c)((function(e){return e.matchesList})).matches,i=Object(p.c)((function(e){return e.playerSearch.playerInfo})),o=i.playerAvatar,d=i.skill_level,_=i.faceit_elo,f=i.nickname,h=i.playerId,g=Object(m.g)().search,k=Object(m.f)(),R=Object(r.useState)(""),I=Object(u.a)(R,2),F=I[0],A=I[1],U=Object(r.useState)(""),M=Object(u.a)(U,2),H=M[0],G=M[1],D=Object(r.useState)([]),P=Object(u.a)(D,2),Q=P[0],q=P[1],B=Object(r.useState)(20),K=Object(u.a)(B,2),z=K[0],J=K[1];return Object(r.useEffect)((function(){var a=new URLSearchParams(g).get("nickname");a&&(G(a),e(function(e){return function(){var a=Object(v.a)(E.a.mark((function a(t){var r,n,c,l,s,i,o;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"GET_SEARCH_RESULT_REQUEST"}),a.prev=1,a.next=4,y("search/v1?limit=1&query=".concat(e));case 4:return r=a.sent,n=r.data.payload.players.results[0].guid,c=r.data.payload.players.results[0].nickname,a.next=9,y("core/v1/nicknames/".concat(c));case 9:return l=a.sent,a.next=12,y("stats/v1/stats/users/".concat(n,"/games/csgo"));case 12:s=a.sent,i=l.data.payload,o={playerAvatar:i.avatar,skill_level:i.games.csgo.skill_level,faceit_elo:i.games.csgo.faceit_elo,nickname:c,playerId:n},t(b(s.data.lifetime,o)),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(1),t({type:"GET_SEARCH_RESULT_FAILURE",error:a.t0});case 21:case"end":return a.stop()}}),a,null,[[1,18]])})));return function(e){return a.apply(this,arguments)}}()}(a)))}),[e,g]),Object(r.useEffect)((function(){var a=new URLSearchParams(g).get("count");g&&h&&e(function(e,a){return function(){var t=Object(v.a)(E.a.mark((function t(r){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"GET_MATCHES_LIST_REQUEST"}),t.prev=1,t.next=4,y("stats/api/v1/stats/time/users/".concat(e,"/games/csgo?size=").concat(a));case 4:n=t.sent,r({type:"GET_MATCHES_LIST_SUCCESS",matches:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:"GET_MATCHES_LIST_FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(h,Number.parseInt(a||20)+1))}),[e,g,h,z]),Object(r.useEffect)((function(){var e=[];if(s){for(var a=0;a<s.length-1;a+=1)e[a]=s[a].elo-s[a+1].elo;q(s.map((function(a,t){var r=w()({match__item:!0,match__win:"1"===a.i10,match__lose:"0"===a.i10});return t!==s.length-1?n.a.createElement(O,{key:a.matchId,matchId:a.matchId,bgClass:r,map:a.i1,team:a.i5,score:a.i18,kd:a.c2,hs:a.c4,frags:a.i6,assists:a.i7,deaths:a.i8,date:a.created_at,elo:e[t]}):null})))}}),[s]),n.a.createElement("main",{className:"main"},n.a.createElement("div",{className:"main__container container"},n.a.createElement("div",{className:"main__info-box"},n.a.createElement("form",{className:"main__form",onSubmit:function(e){e.preventDefault(),k.push({pathname:"/faceit-metric/",search:"?nickname=".concat(F,"&count=").concat(z)}),A("")}},n.a.createElement("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text",value:F,className:"main__input",placeholder:"enter nickname...",onChange:function(e){A(e.target.value)}}),n.a.createElement("button",{type:"submit",className:"main__btn-search btn"},n.a.createElement(N.a,{icon:S.a})),n.a.createElement("div",{className:"select"},n.a.createElement("select",{defaultValue:z,onChange:function(e){J(Number.parseInt(e.target.value)),k.push({pathname:"/faceit-metric/",search:"?nickname=".concat(f,"&count=").concat(e.target.value)})},className:"main__select"},n.a.createElement("option",{value:10},"10"),n.a.createElement("option",{value:20},"20"),n.a.createElement("option",{value:30},"30"),n.a.createElement("option",{value:40},"40"),n.a.createElement("option",{value:50},"50")))),!c&&H&&(l||f.toLowerCase()!==H.toLowerCase())&&n.a.createElement("div",null,"Player ",H," not found"),c&&n.a.createElement(x,null),n.a.createElement("div",{className:"player-cards"},t&&!l&&H&&!c&&f.toLowerCase()===H.toLowerCase()&&n.a.createElement(C,{nickname:f,avatar:o,level:d,elo:_,matches:t.m1,kd:t.k5,hs:t.k8,winRate:t.k6}),s&&!l&&H&&!c&&f.toLowerCase()===H.toLowerCase()&&n.a.createElement(L,{gamesCount:s.length-1,matches:j(s)}))),t&&!l&&H&&!c&&f.toLowerCase()===H.toLowerCase()&&n.a.createElement(T,{matches:s,matchesArr:Q})))};t(76);var I=function(){return n.a.createElement("section",{className:"main"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"comparison"},"so far empty :(")))};var F=function(){return n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:"/faceit-metric/",component:R}),n.a.createElement(m.a,{exact:!0,path:"/faceit-metric/compare",component:I}))};var A=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(o,null),n.a.createElement(F,null),n.a.createElement(s,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=t(12),M=t(40),H=t(5),G={playerStats:null,playerInfo:{playerAvatar:"",skill_level:"",faceit_elo:"",nickname:"",playerId:null},isFetching:!1,error:null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_SEARCH_RESULT_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{playerStats:null,playerInfo:{},isFetching:!0});case"GET_SEARCH_RESULT_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{playerStats:a.playerStats,playerInfo:a.playerInfo,error:null,isFetching:!1});case"GET_SEARCH_RESULT_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},P={matches:null,isFetching:!1,error:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_MATCHES_LIST_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{matches:[],isFetching:!0});case"GET_MATCHES_LIST_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{matches:a.matches,error:null,isFetching:!1});case"GET_MATCHES_LIST_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},q=Object(U.c)({playerSearch:D,matchesList:Q}),B=Object(U.d)(q,Object(U.a)(M.a));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,null,n.a.createElement(p.a,{store:B},n.a.createElement(A,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.b61c122c.chunk.js.map