(this["webpackJsonpfaceit-metric"]=this["webpackJsonpfaceit-metric"]||[]).push([[0],{113:function(e,a,t){},208:function(e,a,t){},209:function(e,a,t){},210:function(e,a,t){},211:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(31),l=t.n(c);t(85),t(86),t(87);var s=function(){return n.a.createElement("footer",{className:"footer"},n.a.createElement("div",null,"by\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/iph9x",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://vk.com/iph9x")}},"Ivan")))},i=t(18);t(88);var o=function(){return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"header__container"},n.a.createElement(i.b,{to:"/faceit-metric/"},n.a.createElement("h1",null,"FACEIT METRIC"))))},m=t(3),u=t(51),p=t(9),_=t(16),d=t(34),E=t(35),v=t(13),f=t.n(v),b=t(14),h=t.n(b),y=t(24),g=t(77).create({headers:{"Content-Type":"application/json"},baseURL:"https://api.faceit.com/"});g.interceptors.request.use((function(e){return e})),g.interceptors.response.use((function(e){return e}),(function(e){var a=e.response?e.response.status:408;return a>=500&&window.console.error(e.toString()),401===a&&window.console.log("logout"),Promise.reject(e)}));var N=g,S=function(e){return N.get(e)},O=function(e,a){return{type:"GET_SEARCH_RESULT_SUCCESS",playerStats:e,playerInfo:a}},j=function(e){return{type:"GET_SEARCH_RESULT_FAILURE",error:e}},k=function(e){return function(){var a=Object(y.a)(h.a.mark((function a(t){var r,n,c,l,s,i,o;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"GET_SEARCH_RESULT_REQUEST"}),a.prev=1,a.next=4,S("search/v1?limit=1&query=".concat(e));case 4:return r=a.sent,n=r.data.payload.players.results[0].guid,c=r.data.payload.players.results[0].nickname,a.next=9,S("core/v1/nicknames/".concat(c));case 9:return l=a.sent,a.next=12,S("stats/v1/stats/users/".concat(n,"/games/csgo"));case 12:s=a.sent,i=l.data.payload,o={playerAvatar:i.avatar,skill_level:i.games.csgo.skill_level,faceit_elo:i.games.csgo.faceit_elo,nickname:c,playerId:n},t(O(s.data.lifetime,o)),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(1),t(j(a.t0));case 21:case"end":return a.stop()}}),a,null,[[1,18]])})));return function(e){return a.apply(this,arguments)}}()};t(113);var x=function(){return n.a.createElement("div",{className:"preloader-wrapper"},n.a.createElement("div",{className:"preloader"},n.a.createElement(d.a,{icon:E.b})))};var C=function(e){var a=e.nickname,t=e.avatar,r=e.level,c=e.elo,l=e.matches,s=e.kd,i=e.hs,o=e.winRate,m=e.maxElo,u=f()({"player-card__bg":!0,"player-card__bg_red":10===r,"player-card__bg_orange":r>=8&&r<=9,"player-card__bg_yellow":r>=4&&r<=7,"player-card__bg_green":r>=2&&r<=3,"player-card__bg_white":1===r});return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"player-card player-card__avatar-box"},n.a.createElement("div",{className:"player-card__nickname"},a),n.a.createElement("div",{className:u},"."),n.a.createElement("img",{className:"player-card__avatar",src:t,alt:""})),n.a.createElement("div",{className:"player-card player-card__alltime-box"},n.a.createElement("div",{className:"player-card__avg-title"},"Statistic for alltime"),n.a.createElement("div",{className:"player-card__stat-box"},n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"Level:"),n.a.createElement("div",{className:"player-card__postfix"},r)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"Elo:"),n.a.createElement("div",{className:"player-card__postfix"},c)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"Max Elo:"),n.a.createElement("div",{className:"player-card__postfix"},m)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"matches:"),n.a.createElement("div",{className:"player-card__postfix"},l)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/D Ratio:"),n.a.createElement("div",{className:"player-card__postfix"},s)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),n.a.createElement("div",{className:"player-card__postfix"},i,"%")),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"win rate:"),n.a.createElement("div",{className:"player-card__postfix"},o,"%")))))};var w=function(e){var a=e.matches,t=e.matchesArr;return n.a.createElement("div",{className:"match__wrapper"},a&&n.a.createElement("div",{className:"match__item-titles"},n.a.createElement("div",null,"map"),n.a.createElement("div",null,"team"),n.a.createElement("div",null,"score"),n.a.createElement("div",null,"kd"),n.a.createElement("div",null,"hs %"),n.a.createElement("div",null,"k - a - d"),n.a.createElement("div",null,"date"),n.a.createElement("div",null,"elo")),a&&t)},T=function(e){var a=new Date(null);return a.setTime(e),"\n        ".concat(a.getDate()<10?"0".concat(a.getDate()):a.getDate(),".").concat(a.getMonth()<10?"0".concat(a.getMonth()+1):a.getMonth()+1," - ").concat(a.getHours()<10?"0".concat(a.getHours()):a.getHours(),":").concat(a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes())},I=function(e){for(var a={kd:0,kr:0,hs:0,frags:0,winrate:0},t=e.length,r=0;r<t;r+=1)a.kd+=Number.parseFloat(e[r].c2),a.kr+=Number.parseFloat(e[r].c3),a.frags+=Number.parseFloat(e[r].i6),a.hs+=Number.parseFloat(e[r].c4),a.winrate+=Number.parseFloat(e[r].i10);return{kd:Number.parseFloat((a.kd/t).toFixed(2)),kr:Number.parseFloat((a.kr/t).toFixed(2)),hs:Math.floor(a.hs/t),frags:Math.floor(a.frags/t),winrate:Math.floor(a.winrate/t*100)}};var R=function(e){var a=e.match,t=e.eloDif,r=f()({match__item:!0,match__win:"1"===a.i10,match__lose:"0"===a.i10});return n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"faceit.com",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://www.faceit.com/ru/csgo/room/".concat(a.matchId,"/scoreboard"))}},n.a.createElement("div",{className:r},n.a.createElement("div",null,a.i1.split("/").pop()),n.a.createElement("div",null,a.i5),n.a.createElement("div",null,a.i18),n.a.createElement("div",null,a.c2),n.a.createElement("div",null,a.c4),n.a.createElement("div",null,"".concat(a.i6," - ").concat(a.i7," - ").concat(a.i8)),n.a.createElement("div",null,T(a.created_at)),n.a.createElement("div",null,"".concat(a.elo?a.elo:"(+0)"," ").concat(t?"(".concat(Number.isNaN(t)?"+0":t>0?"+".concat(t):t,")"):""))))},F=t(78);t(208);var A=function(e){var a=e.eloArr,t={labels:e.numsChart,datasets:[{label:"elo",data:a,backgroundColor:["#2666c75e"],borderColor:["#2666c7"],borderWidth:4,pointBackgroundColor:"#fff",pointBorderColor:"rgba(60, 161, 219, 0.5)",pointBorderWidth:1}]};return n.a.createElement("div",{className:"chart"},n.a.createElement(F.Line,{data:t,options:{maintainAspectRatio:!1,animation:{duration:0}}}))};var L=function(e){var a=e.matches,t=e.gamesCount,r=a.kd,c=a.kr,l=a.hs,s=a.frags,i=a.winrate;return n.a.createElement("div",{className:"player-card player-card__avg-box"},n.a.createElement("div",{className:"player-card__avg-title"},"Statistic for ",t," games"),n.a.createElement("div",{className:"player-card__stat-box"},n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg frags:"),n.a.createElement("div",{className:"player-card__postfix"},s)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/D:"),n.a.createElement("div",{className:"player-card__postfix"},r)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"K/R:"),n.a.createElement("div",{className:"player-card__postfix"},c)),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),n.a.createElement("div",{className:"player-card__postfix"},l,"%")),n.a.createElement("div",{className:"player-card__string"},n.a.createElement("div",{className:"player-card__prefix"},"win rate:"),n.a.createElement("div",{className:"player-card__postfix"},i,"%"))))};t(209),t(210);var M=function(){return n.a.createElement("div",{className:"comparison"},"so far empty :(")};var U=function(){var e=Object(_.b)(),a=Object(_.c)((function(e){return e.playerSearch})),t=a.playerStats,c=a.isFetching,l=a.error,s=Object(_.c)((function(e){return e.matchesList})),i=s.allMatches,o=s.isFetching,v=Object(_.c)((function(e){return e.playerSearch.playerInfo})),b=v.playerAvatar,g=v.skill_level,N=v.faceit_elo,O=v.nickname,j=v.playerId,F=Object(m.g)().search,U=Object(m.f)(),G=Object(r.useState)(!1),H=Object(p.a)(G,2),D=H[0],P=H[1],B=Object(r.useState)(""),Q=Object(p.a)(B,2),W=Q[0],K=Q[1],q=Object(r.useState)(null),J=Object(p.a)(q,2),z=J[0],$=J[1],V=Object(r.useState)([]),X=Object(p.a)(V,2),Y=X[0],Z=X[1],ee=Object(r.useState)([]),ae=Object(p.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)([]),ce=Object(p.a)(ne,2),le=ce[0],se=ce[1],ie=Object(r.useState)(20),oe=Object(p.a)(ie,2),me=oe[0],ue=oe[1],pe=Object(r.useState)(0),_e=Object(p.a)(pe,2),de=_e[0],Ee=_e[1],ve=Object(r.useState)(null),fe=Object(p.a)(ve,2),be=fe[0],he=fe[1],ye=Object(r.useState)(!0),ge=Object(p.a)(ye,2),Ne=ge[0],Se=ge[1],Oe=Object(r.useState)(!1),je=Object(p.a)(Oe,2),ke=je[0],xe=je[1],Ce=Object(r.useState)(!1),we=Object(p.a)(Ce,2),Te=we[0],Ie=we[1],Re=function(){return O.toLowerCase()===z.toLowerCase()};Object(r.useEffect)((function(){P(!0)}),[F]),Object(r.useEffect)((function(){var a=new URLSearchParams(F).get("nickname");a&&($(a),e(k(a)))}),[e,F]),Object(r.useEffect)((function(){t&&!c&&e(function(e,a){return function(){var t=Object(y.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"GET_MATCHES_LIST_REQUEST"}),t.prev=1,t.next=4,S("stats/api/v1/stats/time/users/".concat(e,"/games/csgo?size=").concat(a));case 4:n=t.sent,r({type:"GET_MATCHES_LIST_SUCCESS",allMatches:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:"GET_MATCHES_LIST_FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(j,t.m1))}),[e,j]),Object(r.useEffect)((function(){if(i){for(var e=[],a=0;a<i.length;a+=1)e[a]=Number.parseInt(i[a].elo);var t=e.filter((function(e){return!Number.isNaN(e)}));Ee(Math.max.apply(Math,Object(u.a)(t)))}}),[i]),Object(r.useEffect)((function(){if(i&&!o)if(i.length<me)he(i);else{var e=Object(u.a)(i);he(e.slice(0,me))}}),[i,me]),Object(r.useEffect)((function(){if(be&&i){for(var e=[],a=[],t=[],r=0;r<me;r+=1)i[r+1]&&(e[r]=i[r].elo-i[r+1].elo,void 0!==i[r].elo?(a[r]=i[r].elo,t[r]=T(i[r].created_at)):(a[r]=null,t[r]=null));re(a.filter((function(e){return null!==e})).reverse()),se(t.filter((function(e){return null!==e})).reverse());var c=be.map((function(a,t){return n.a.createElement(R,{key:a.matchId+t,match:a,eloDif:e[t]})}));Z(c)}}),[me,be]),Object(r.useEffect)((function(){be&&Re()&&P(!1)}),[be]);var Fe=f()({btn:!0,"main__nav-btn":!0,"main__nav-btn_active":Ne}),Ae=f()({btn:!0,"main__nav-btn":!0,"main__nav-btn_active":ke}),Le=f()({btn:!0,"main__nav-btn":!0,"main__nav-btn_active":Te});return n.a.createElement("main",{className:"main"},n.a.createElement("div",{className:"main__container container"},n.a.createElement("div",{className:"main__info-box"},n.a.createElement("form",{className:"main__form",onSubmit:function(a){a.preventDefault(),U.push({pathname:"/faceit-metric/",search:"?nickname=".concat(W)});var t=new URLSearchParams(F).get("nickname");t&&($(t),e(k(t))),K("")}},n.a.createElement("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text",value:W,className:"main__input",placeholder:"Enter nickname...",onChange:function(e){K(e.target.value)}}),n.a.createElement("button",{type:"submit",className:"main__btn-search btn"},n.a.createElement(d.a,{icon:E.a})),n.a.createElement("div",{className:"select"},n.a.createElement("select",{value:me,onChange:function(e){ue(Number.parseInt(e.target.value))},className:"main__select"},n.a.createElement("option",{value:10},"10"),n.a.createElement("option",{value:20},"20"),n.a.createElement("option",{value:30},"30"),n.a.createElement("option",{value:40},"40"),n.a.createElement("option",{value:50},"50"),n.a.createElement("option",{value:100},"100")))),t&&be&&!l&&O&&Re()&&!c&&!o&&n.a.createElement("div",{className:"main__nav-wrapper"},n.a.createElement("button",{className:Fe,onClick:function(){Se(!0),xe(!1),Ie(!1)}},"Profile"),n.a.createElement("button",{className:Ae,onClick:function(){Se(!1),xe(!0),Ie(!1)}},"Chart"),n.a.createElement("button",{className:Le,onClick:function(){Se(!1),xe(!1),Ie(!0)}},"Compare")),D&&!l&&z&&n.a.createElement(x,null),(!D&&O&&!Re()||l)&&n.a.createElement("div",null,"Player ",z," not found"),ke&&t&&be&&!l&&O&&Re()&&!c&&!o&&n.a.createElement(A,{eloArr:te,numsChart:le}),Ne&&t&&be&&!l&&O&&Re()&&!c&&!o&&n.a.createElement("div",{className:"player-cards"},n.a.createElement(C,{maxElo:de,nickname:O,avatar:b,level:g,elo:N,matches:t.m1,kd:t.k5,hs:t.k8,winRate:t.k6}),n.a.createElement(L,{gamesCount:i.length<me?i.length:me,matches:I(be)})),Te&&n.a.createElement(M,null)),be&&!l&&O&&Re()&&!c&&!o&&n.a.createElement(w,{matches:be,matchesArr:Y})))};var G=function(){return n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:"/faceit-metric/",component:U}),n.a.createElement(m.a,{exact:!0,path:"/faceit-metric/compare",component:M}))};var H=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(o,null),n.a.createElement(G,null),n.a.createElement(s,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=t(19),P=t(79),B=t(4),Q={playerStats:null,playerInfo:{playerAvatar:"",skill_level:"",faceit_elo:"",nickname:"",playerId:null},comparisonPlayers:null,isFetching:!1,error:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_SEARCH_RESULT_REQUEST":return Object(B.a)(Object(B.a)({},e),{},{playerStats:null,playerInfo:{nickname:null,playerId:null},isFetching:!0});case"GET_SEARCH_RESULT_SUCCESS":return Object(B.a)(Object(B.a)({},e),{},{playerStats:a.playerStats,playerInfo:a.playerInfo,error:null,isFetching:!1});case"GET_SEARCH_RESULT_FAILURE":return Object(B.a)(Object(B.a)({},e),{},{error:a.error,isFetching:!1});case"GET_COMPARISON_LIST_REQUEST":return Object(B.a)(Object(B.a)({},e),{},{isFetching:!0});case"GET_COMPARISON_LIST_SUCCESS":return Object(B.a)(Object(B.a)({},e),{},{comparisonPlayers:a.comparisonPlayers,isFetching:!1});case"GET_COMPARISON_LIST_FAILURE":return Object(B.a)(Object(B.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},K={allMatches:null,isFetching:!1,error:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_MATCHES_LIST_REQUEST":return Object(B.a)(Object(B.a)({},e),{},{allMatches:null,isFetching:!0,error:null});case"GET_MATCHES_LIST_SUCCESS":return Object(B.a)(Object(B.a)({},e),{},{allMatches:a.allMatches,error:null,isFetching:!1});case"GET_MATCHES_LIST_FAILURE":return Object(B.a)(Object(B.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},J=Object(D.c)({playerSearch:W,matchesList:q}),z=Object(D.d)(J,Object(D.a)(P.a));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,null,n.a.createElement(_.a,{store:z},n.a.createElement(H,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,a,t){e.exports=t(211)},85:function(e,a,t){},86:function(e,a,t){},87:function(e,a,t){},88:function(e,a,t){}},[[80,1,2]]]);
//# sourceMappingURL=main.f22c64ce.chunk.js.map