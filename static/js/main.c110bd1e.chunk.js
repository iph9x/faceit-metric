(this["webpackJsonpfaceit-metric"]=this["webpackJsonpfaceit-metric"]||[]).push([[0],{44:function(e,a,t){e.exports=t(80)},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){"use strict";t.r(a);var r=t(0),c=t.n(r),n=t(19),l=t.n(n);t(49),t(50),t(51);var s=function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("div",null,"by\xa0",c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vk.com/iph9x",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://vk.com/iph9x")}},"Ivan")))},i=t(11);t(52);var o=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__container"},c.a.createElement(i.b,{to:"/faceit-metric/"},c.a.createElement("h1",null,"FACEIT METRIC")),c.a.createElement("nav",{className:"nav"},c.a.createElement(i.b,{to:"/faceit-metric/"},"Results"),c.a.createElement(i.b,{to:"/faceit-metric/compare"},"Compare"))))},m=t(3),u=t(30),p=t(13),d=t(10),_=t(12),E=t.n(_),v=t(18),f=t(42).create({headers:{"Content-Type":"application/json"},baseURL:"https://api.faceit.com/"});f.interceptors.request.use((function(e){return e})),f.interceptors.response.use((function(e){return e}),(function(e){var a=e.response?e.response.status:408;return a>=500&&window.console.error(e.toString()),401===a&&window.console.log("logout"),Promise.reject(e)}));var h=f,y=function(e){return h.get(e)},g=function(e,a){return{type:"GET_SEARCH_RESULT_SUCCESS",playerStats:e,playerInfo:a}},b=function(e){return{type:"GET_SEARCH_RESULT_FAILURE",error:e}},N=function(e){return function(){var a=Object(v.a)(E.a.mark((function a(t){var r,c,n,l,s,i,o;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"GET_SEARCH_RESULT_REQUEST"}),a.prev=1,a.next=4,y("search/v1?limit=1&query=".concat(e));case 4:return r=a.sent,c=r.data.payload.players.results[0].guid,n=r.data.payload.players.results[0].nickname,a.next=9,y("core/v1/nicknames/".concat(n));case 9:return l=a.sent,a.next=12,y("stats/v1/stats/users/".concat(c,"/games/csgo"));case 12:s=a.sent,i=l.data.payload,o={playerAvatar:i.avatar,skill_level:i.games.csgo.skill_level,faceit_elo:i.games.csgo.faceit_elo,nickname:n,playerId:c},t(g(s.data.lifetime,o)),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(1),t(b(a.t0));case 21:case"end":return a.stop()}}),a,null,[[1,18]])})));return function(e){return a.apply(this,arguments)}}()},S=t(22),k=t(24),O=t(23),j=t.n(O);t(77);var w=function(){return c.a.createElement("div",{className:"preloader-wrapper"},c.a.createElement("div",{className:"preloader"},c.a.createElement(S.a,{icon:k.b})))};var x=function(e){var a=e.nickname,t=e.avatar,r=e.level,n=e.elo,l=e.matches,s=e.kd,i=e.hs,o=e.winRate,m=e.maxElo,u=j()({"player-card__bg":!0,"player-card__bg_red":10===r,"player-card__bg_orange":r>=8&&r<=9,"player-card__bg_yellow":r>=4&&r<=7,"player-card__bg_green":r>=2&&r<=3,"player-card__bg_white":1===r});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"player-card player-card__avatar-box"},c.a.createElement("div",{className:"player-card__nickname"},a),c.a.createElement("div",{className:u},"."),c.a.createElement("img",{className:"player-card__avatar",src:t,alt:""})),c.a.createElement("div",{className:"player-card player-card__alltime-box"},c.a.createElement("div",{className:"player-card__avg-title"},"Statistic for alltime"),c.a.createElement("div",{className:"player-card__stat-box"},c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"Level:"),c.a.createElement("div",{className:"player-card__postfix"},r)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"Elo:"),c.a.createElement("div",{className:"player-card__postfix"},n)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"Max Elo:"),c.a.createElement("div",{className:"player-card__postfix"},m)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"matches:"),c.a.createElement("div",{className:"player-card__postfix"},l)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"K/D Ratio:"),c.a.createElement("div",{className:"player-card__postfix"},s)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),c.a.createElement("div",{className:"player-card__postfix"},i,"%")),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"win rate:"),c.a.createElement("div",{className:"player-card__postfix"},o,"%")))))};var C=function(e){var a=e.matches,t=e.matchesArr;return c.a.createElement("div",{className:"match__wrapper"},a&&c.a.createElement("div",{className:"match__item-titles"},c.a.createElement("div",null,"map"),c.a.createElement("div",null,"team"),c.a.createElement("div",null,"score"),c.a.createElement("div",null,"kd"),c.a.createElement("div",null,"hs %"),c.a.createElement("div",null,"k - a - d"),c.a.createElement("div",null,"date"),c.a.createElement("div",null,"elo")),a&&t)},T=function(e){for(var a={kd:0,kr:0,hs:0,frags:0,winrate:0},t=e.length,r=0;r<t;r+=1)a.kd+=Number.parseFloat(e[r].c2),a.kr+=Number.parseFloat(e[r].c3),a.frags+=Number.parseFloat(e[r].i6),a.hs+=Number.parseFloat(e[r].c4),a.winrate+=Number.parseFloat(e[r].i10);return{kd:Number.parseFloat((a.kd/t).toFixed(2)),kr:Number.parseFloat((a.kr/t).toFixed(2)),hs:Math.floor(a.hs/t),frags:Math.floor(a.frags/t),winrate:Math.floor(a.winrate/t*100)}};var I=function(e){var a=e.bgClass,t=e.map,r=e.team,n=e.score,l=e.kd,s=e.hs,i=e.frags,o=e.assists,m=e.deaths,u=e.date,p=e.eloDif,d=e.elo,_=e.matchId;return c.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"faceit.com",onClick:function(e){return function(e,a){e.preventDefault(),window.open(a,"_blank")}(e,"https://www.faceit.com/ru/csgo/room/".concat(_,"/scoreboard"))}},c.a.createElement("div",{className:a},c.a.createElement("div",null,t),c.a.createElement("div",null,r),c.a.createElement("div",null,n),c.a.createElement("div",null,l),c.a.createElement("div",null,s),c.a.createElement("div",null,"".concat(i," - ").concat(o," - ").concat(m)),c.a.createElement("div",null,function(e){var a=new Date(null);return a.setTime(e),"\n        ".concat(a.getDate()<10?"0".concat(a.getDate()):a.getDate(),".").concat(a.getMonth()<10?"0".concat(a.getMonth()+1):a.getMonth()+1," -\n        ").concat(a.getHours()<10?"0".concat(a.getHours()):a.getHours(),":").concat(a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes())}(u)),c.a.createElement("div",null,"".concat(d," ").concat(p?"(".concat(Number.isNaN(p)?"+0":p>0?"+".concat(p):p,")"):""))))};var L=function(e){var a=e.matches,t=e.gamesCount,r=a.kd,n=a.kr,l=a.hs,s=a.frags,i=a.winrate;return c.a.createElement("div",{className:"player-card player-card__avg-box"},c.a.createElement("div",{className:"player-card__avg-title"},"Statistic for ",t," games"),c.a.createElement("div",{className:"player-card__stat-box"},c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"avg frags:"),c.a.createElement("div",{className:"player-card__postfix"},s)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"K/D:"),c.a.createElement("div",{className:"player-card__postfix"},r)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"K/R:"),c.a.createElement("div",{className:"player-card__postfix"},n)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"avg hs:"),c.a.createElement("div",{className:"player-card__postfix"},l)),c.a.createElement("div",{className:"player-card__string"},c.a.createElement("div",{className:"player-card__prefix"},"win rate:"),c.a.createElement("div",{className:"player-card__postfix"},i,"%"))))};t(78);var R=function(){var e=Object(d.b)(),a=Object(d.c)((function(e){return e.playerSearch})),t=a.playerStats,n=a.isFetching,l=a.error,s=Object(d.c)((function(e){return e.matchesList})),i=s.allMatches,o=s.isFetching,_=Object(d.c)((function(e){return e.playerSearch.playerInfo})),f=_.playerAvatar,h=_.skill_level,g=_.faceit_elo,b=_.nickname,O=_.playerId,R=Object(m.g)().search,F=Object(m.f)(),M=Object(r.useState)(""),A=Object(p.a)(M,2),U=A[0],G=A[1],H=Object(r.useState)(""),D=Object(p.a)(H,2),P=D[0],Q=D[1],K=Object(r.useState)([]),q=Object(p.a)(K,2),B=q[0],J=q[1],W=Object(r.useState)(20),z=Object(p.a)(W,2),V=z[0],$=z[1],X=Object(r.useState)(0),Y=Object(p.a)(X,2),Z=Y[0],ee=Y[1],ae=Object(r.useState)(null),te=Object(p.a)(ae,2),re=te[0],ce=te[1];return Object(r.useEffect)((function(){var a=new URLSearchParams(R).get("nickname");a&&(Q(a),e(N(a)))}),[e,R]),Object(r.useEffect)((function(){O&&t.m1&&e(function(e,a){return function(){var t=Object(v.a)(E.a.mark((function t(r){var c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"GET_MATCHES_LIST_REQUEST"}),t.prev=1,t.next=4,y("stats/api/v1/stats/time/users/".concat(e,"/games/csgo?size=").concat(a));case 4:c=t.sent,r({type:"GET_MATCHES_LIST_SUCCESS",allMatches:c.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:"GET_MATCHES_LIST_FAILURE",error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(O,t.m1))}),[e,O,t]),Object(r.useEffect)((function(){if(i)if(i.length<V)$(i.length),ce(i);else{var e=Object(u.a)(i).slice(0,V);ce(e)}}),[i,V]),Object(r.useEffect)((function(){var e=[];if(re&&i){for(var a=0;a<i.length;a+=1)e[a]=Number.parseInt(i[a].elo);var t=e.filter((function(e){return!Number.isNaN(e)}));ee(Math.max.apply(Math,Object(u.a)(t)))}if(re&&i){for(var r=[],n=0;n<V;n+=1)i[n+1]&&(r[n]=i[n].elo-i[n+1].elo);var l=re.map((function(e,a){var t=j()({match__item:!0,match__win:"1"===e.i10,match__lose:"0"===e.i10});return c.a.createElement(I,{key:e.matchId,matchId:e.matchId,bgClass:t,map:e.i1,team:e.i5,score:e.i18,kd:e.c2,hs:e.c4,frags:e.i6,assists:e.i7,deaths:e.i8,date:e.created_at,elo:e.elo,eloDif:r[a]})}));J(l)}}),[i,V,re]),c.a.createElement("main",{className:"main"},c.a.createElement("div",{className:"main__container container"},c.a.createElement("div",{className:"main__info-box"},c.a.createElement("form",{className:"main__form",onSubmit:function(a){a.preventDefault(),F.push({pathname:"/faceit-metric/",search:"?nickname=".concat(U)});var t=new URLSearchParams(R).get("nickname");t&&(Q(t),e(N(t))),G("")}},c.a.createElement("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text",value:U,className:"main__input",placeholder:"Enter nickname...",onChange:function(e){G(e.target.value)}}),c.a.createElement("button",{type:"submit",className:"main__btn-search btn"},c.a.createElement(S.a,{icon:k.a})),c.a.createElement("div",{className:"select"},c.a.createElement("select",{defaultValue:V,onChange:function(e){$(Number.parseInt(e.target.value))},className:"main__select"},c.a.createElement("option",{value:10},"10"),c.a.createElement("option",{value:20},"20"),c.a.createElement("option",{value:30},"30"),c.a.createElement("option",{value:40},"40"),c.a.createElement("option",{value:50},"50"),c.a.createElement("option",{value:100},"100")))),!n&&P&&b&&l&&b.toLowerCase()!==P.toLowerCase()&&c.a.createElement("div",null,"Player ",P," not found"),(n||o)&&c.a.createElement(w,null),c.a.createElement("div",{className:"player-cards"},t&&!l&&P&&!n&&!o&&b.toLowerCase()===P.toLowerCase()&&c.a.createElement(x,{maxElo:Z,nickname:b,avatar:f,level:h,elo:g,matches:t.m1,kd:t.k5,hs:t.k8,winRate:t.k6}),re&&!l&&P&&!n&&!o&&b.toLowerCase()===P.toLowerCase()&&c.a.createElement(L,{gamesCount:V,matches:T(re)}))),re&&!l&&P&&!n&&!o&&b.toLowerCase()===P.toLowerCase()&&c.a.createElement(C,{matches:re,matchesArr:B})))};t(79);var F=function(){var e=Object(d.c)((function(e){return e.playerSearch.playerInfo})),a=e.nickname,t=e.playerId;return c.a.createElement("section",{className:"main"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"comparison"},c.a.createElement("div",null,t),c.a.createElement("div",null,a),"so far empty :(")))};var M=function(){return c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/faceit-metric/",component:R}),c.a.createElement(m.a,{exact:!0,path:"/faceit-metric/compare",component:F}))};var A=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(o,null),c.a.createElement(M,null),c.a.createElement(s,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=t(14),G=t(43),H=t(4),D={playerStats:null,playerInfo:{playerAvatar:"",skill_level:"",faceit_elo:"",nickname:"",playerId:null},comparisonPlayers:null,isFetching:!1,error:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_SEARCH_RESULT_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{playerStats:null,playerInfo:{},isFetching:!0});case"GET_SEARCH_RESULT_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{playerStats:a.playerStats,playerInfo:a.playerInfo,error:null,isFetching:!1});case"GET_SEARCH_RESULT_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{error:a.error,isFetching:!1});case"GET_COMPARISON_LIST_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{playerStats:null,playerInfo:{},isFetching:!0});case"GET_COMPARISON_LIST_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{comparisonPlayers:a.comparisonPlayers,isFetching:!1});case"GET_COMPARISON_LIST_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},Q={allMatches:null,isFetching:!1,error:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_MATCHES_LIST_REQUEST":return Object(H.a)(Object(H.a)({},e),{},{allMatches:null,isFetching:!0,error:null});case"GET_MATCHES_LIST_SUCCESS":return Object(H.a)(Object(H.a)({},e),{},{allMatches:a.allMatches,error:null,isFetching:!1});case"GET_MATCHES_LIST_FAILURE":return Object(H.a)(Object(H.a)({},e),{},{error:a.error,isFetching:!1});default:return e}},q=Object(U.c)({playerSearch:P,matchesList:K}),B=Object(U.d)(q,Object(U.a)(G.a));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,null,c.a.createElement(d.a,{store:B},c.a.createElement(A,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.c110bd1e.chunk.js.map